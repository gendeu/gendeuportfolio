<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gen Deu Gagarin | UI/UX Portfolio</title>
  <meta name="description" content="Gen Deu Gagarin — UI/UX Developer & Frontend Engineer" />
  <style>
/* ---------- Base + Theme ---------- */
:root{--bg1:#0f2027;--bg2:#203a43;--bg3:#2c5364;--text:#f5f5f5;--accent:#00f2fe;--glass-bg:rgba(255,255,255,0.08);--glass-border:rgba(255,255,255,0.2)}
body.light{--bg1:#dbe6f6;--bg2:#cfd9df;--bg3:#e2ebf0;--text:#222;--accent:#3f51b5;--glass-bg:rgba(255,255,255,0.5);--glass-border:rgba(0,0,0,0.1)}
*{box-sizing:border-box}html,body{height:100%;margin:0;font-family:'Poppins',system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:var(--text);-webkit-font-smoothing:antialiased}
body{background:linear-gradient(-45deg,var(--bg1),var(--bg2),var(--bg3));background-size:400% 400%;animation:gradientMove 25s ease infinite;transition:background .8s ease,color .3s ease}
@keyframes gradientMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
a{color:var(--accent);text-decoration:none}

/* ---------- Layout ---------- */
header{position:sticky;top:0;z-index:1000;backdrop-filter:blur(12px);padding:1rem 2rem}
nav{display:flex;justify-content:space-between;align-items:center;gap:1rem}nav ul{list-style:none;display:flex;gap:1.5rem;margin:0;padding:0}nav ul li a{text-decoration:none;color:var(--text);position:relative}nav ul li a::after{content:"";position:absolute;left:0;bottom:-4px;width:100%;height:2px;background:var(--accent);transform:scaleX(0);transition:transform .3s ease;transform-origin:left}nav ul li a:hover::after{transform:scaleX(1)}#menu-toggle{display:none;cursor:pointer;font-size:1.5rem}
.page{display:none;opacity:0;transform:translateY(20px);transition:opacity .45s ease,transform .45s ease;min-height:80vh;padding:3.5rem 2rem}.page.active{display:block;opacity:1;transform:translateY(0)}
.hero{text-align:center;margin-top:12vh;padding:2rem}.highlight{color:var(--accent)}
.card.glass{padding:2rem;border-radius:20px;background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:blur(15px);margin:1.5rem auto;width:90%;max-width:1000px;text-align:center;transition:transform .25s ease,box-shadow .25s ease}
.btn{display:inline-block;margin-top:1rem;padding:.6rem 1.2rem;border-radius:30px;background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:blur(10px);color:var(--accent);font-weight:bold;text-decoration:none;transition:transform .2s ease,background .2s ease}
.btn:hover{transform:scale(1.04)}
.muted{color:rgba(255,255,255,.7);font-size:.95rem}

/* Projects header + view toggle */
.projects-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
.view-toggle{display:flex;gap:8px}
.view-btn{width:40px;height:40px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:transparent;color:var(--text);cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center}
.view-btn[aria-pressed="true"]{background:var(--accent);color:#071225;box-shadow:0 8px 18px rgba(0,0,0,.35);border-color:rgba(255,255,255,.08)}

/* Grid view */
.project-grid{display:grid;gap:1.25rem;grid-template-columns:repeat(3,1fr)}@media (max-width:1024px){.project-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:720px){.project-grid{grid-template-columns:1fr}}
.project-grid .project{padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);cursor:pointer;transition:transform .2s ease}
.project-grid .project:hover{transform:translateY(-6px)}

/* ---------- CAROUSEL (your original API-ready) ---------- */
.custom-carousel{
  position:relative;
  max-width:1000px;
  margin:0 auto;
  display:flex;
  align-items:center;
  justify-content:center;
}
.carousel-track-container{
  width:100%;
  min-height:303px;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  position:relative;
}
.carousel-track{
  display:flex;
  transition:transform .5s ease;
  will-change:transform;
  position: absolute;
  left: -80px;
}
.carousel-slide{
  flex:0 0 auto;
  width:190px;
  max-height: 240px;
  margin:0 10px;
  background:#fff;
  overflow:hidden;
  text-align:center;
  opacity:.5;
  transition:all .3s ease;
  display:flex;
  flex-direction:column;
  cursor:pointer;
  border: 3px gray solid;
  border-radius:8px;
}
.carousel-slide img{
  width:100%;
  object-fit:cover;
}
.carousel-slide p{
    background: #f5f5f5;
    margin: 0;
    height: 90px;
    padding: 10px;
    font-size: 14px;
    font-weight: 600;
    color: #333;
    align-items: center;
    text-align: center;
    justify-content: center;
    display: flex;
}
.carousel-slide p.hidden { display:none; }
.carousel-slide.no-title img { height:100%; object-fit:scale-down; }
.carousel-slide.no-title { flex-direction:row; }
.carousel-slide.active{
  transform: scale(1.2);
  opacity:1;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
  z-index:2;
  margin: 0 7px;
}
/* Arrow buttons */
.arrow-btn {
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  background:#fff;
  border:none;
  width:44px;
  height:44px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  box-shadow:rgba(0,0,0,0.19) 0px 6px 8px;
  z-index:3;
  transition:background 0.2s ease;
}
.arrow-btn svg { width:36px; height:36px; fill:#333; }
.arrow-btn:hover { background:#f0f0f0; }
.arrow-btn.prev { left:6px; }
.arrow-btn.next { right:6px; }
.arrow-btn:disabled { opacity:.3; cursor:not-allowed; }
/* HIDE description area by default (we'll use modal) */
.carousel-description{ display:none !important; }

/* Modal */
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);justify-content:center;align-items:center;z-index:6000;opacity:0;transition:opacity .25s ease}.modal.show{display:flex;opacity:1}
.modal-content{max-width:820px;padding:2rem;border-radius:12px;background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:blur(15px);transform:translateY(0);opacity:1;position:relative;color:var(--text)}
.modal-content img{max-width:320px;width:100%;height:auto;border-radius:8px;object-fit:cover;float:left;margin-right:18px}
.modal-left{display:flex;flex-direction:row;gap:18px;align-items:flex-start}
.close{position:absolute;top:12px;right:16px;font-size:1.4rem;cursor:pointer}

/* Loader + Particles */
#loader{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:7000;pointer-events:none;opacity:0;transition:opacity .28s ease}
.loader-logo{width:84px;height:84px;border-radius:50%;background:var(--glass-bg);border:2px solid var(--glass-border);display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent);font-size:1.15rem;backdrop-filter:blur(8px);box-shadow:0 8px 30px rgba(0,0,0,0.35);transition:transform .28s ease,box-shadow .28s ease}
#dim{position:fixed;inset:0;background:rgba(0,0,0,0.28);z-index:6900;opacity:0;pointer-events:none;transition:opacity .28s ease}
.loader-visible{opacity:1}

/* Responsive */
@media (max-width:768px){nav ul{display:none}#menu-toggle{display:block} .project-grid{grid-template-columns:1fr}}
@media (max-width:860px){ .modal-content img{display:none} .modal-left{flex-direction:column} }
@media (max-width:560px){ .carousel-slide{ width:150px } }

  </style>
</head>
<body>

  <!-- Loader (floating) -->
  <div id="loader" aria-hidden="true"><div class="loader-logo"><span>GD</span></div></div>
  <div id="dim" aria-hidden="true"></div>

  <!-- Particle Background -->
  <canvas id="bgCanvas"></canvas>

  <!-- Navbar -->
  <header>
    <nav>
      <h1 class="logo">GenDeu</h1>
      <div id="menu-toggle">☰</div>
      <ul>
        <li><a href="#home" class="nav-link active">Home</a></li>
        <li><a href="#about" class="nav-link">About</a></li>
        <li><a href="#projects" class="nav-link">Projects</a></li>
        <li><a href="#skills" class="nav-link">Skills</a></li>
        <li><a href="#contact" class="nav-link">Contact</a></li>
      </ul>
      <button id="theme-toggle">🌙</button>
    </nav>
  </header>

  <!-- Hero -->
  <section id="home" class="page active">
    <div class="hero">
      <h2>Hello, I’m <span class="highlight">Gen Deu</span></h2>
      <p class="tagline"><span id="typewriter"></span></p>
      <a href="#projects" class="btn nav-link">See My Work</a>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="page">
    <h2>About Me</h2>
    <div class="card glass fade-in">
      <p>I’m a UI/UX Developer and Frontend Engineer passionate about creating sleek, user-focused web experiences.</p>
    </div>
  </section>

  <!-- Projects -->
  <section id="projects" class="page">
    <div class="projects-header">
      <h2>Case Studies</h2>
      <div class="view-toggle" role="tablist" aria-label="Projects view toggle">
        <button id="btn-carousel" class="view-btn" aria-pressed="true" title="Carousel view">🎮</button>
        <button id="btn-grid" class="view-btn" aria-pressed="false" title="Grid view">▦</button>
      </div>
    </div>

    <!-- CAROUSEL VIEW -->
    <div id="carouselView" class="custom-carousel" aria-hidden="false">
      <button class="arrow-btn prev" tabindex="0" aria-label="Previous">
        <svg viewBox="0 0 256 512" aria-hidden="true"><path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"></path></svg>
      </button>

      <div class="carousel-track-container">
        <div class="carousel-track" role="listbox" aria-label="Project carousel"><!-- slides injected by JS --></div>
      </div>

      <button class="arrow-btn next" tabindex="0" aria-label="Next">
        <svg viewBox="0 0 256 512" aria-hidden="true"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9L128.1 256 31.7 159.6c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></svg>
      </button>
    </div>

    <!-- GRID / CARD LIST VIEW -->
    <div id="gridView" class="project-grid" style="display:none;">
      <!-- grid items will be wired to the same projects data below -->
      <div class="card glass project" data-key="proj-portfolio"><h3>Portfolio Site</h3><p>Personal portfolio & case study</p></div>
      <div class="card glass project" data-key="proj-redesign"><h3>Redesign Concept</h3><p>Website redesign case</p></div>
      <div class="card glass project" data-key="proj-dashboard"><h3>Analytics Dashboard</h3><p>Data dashboard UI</p></div>
      <div class="card glass project" data-key="proj-mobile"><h3>Mobile App</h3><p>Mobile UX flows</p></div>
      <div class="card glass project" data-key="proj-ecom"><h3>E-commerce UI</h3><p>Product & checkout UX</p></div>
      <div class="card glass project" data-key="proj-designsystem"><h3>Design System</h3><p>Component library</p></div>
    </div>

  </section>

  <!-- Case Study Modal (re-usable) -->
  <div id="case-study" class="modal" aria-hidden="true">
    <div class="modal-content glass" role="dialog" aria-modal="true">
      <span class="close" title="Close modal">&times;</span>
      <div class="modal-left">
        <img id="modal-thumb" src="" alt="">
        <div>
          <h3 id="modal-title"></h3>
          <p id="modal-role" class="muted"></p>
          <div id="modal-body" style="margin-top:8px;color:var(--text);line-height:1.45;"></div>
          <p style="margin-top:12px;"><a id="modal-link" href="#" target="_blank" class="btn">View Live</a></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Skills -->
  <section id="skills" class="page">
    <h2>Skills</h2>
    <div class="card glass fade-in">
      <p>HTML5 · CSS3 · JavaScript · React · Figma · UI/UX</p>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="page">
    <h2>Contact</h2>
    <div class="card glass fade-in">
      <p>Email: <a href="mailto:gendeulgagarin@gmail.com">gendeulgagarin@gmail.com</a></p>
    </div>
  </section>

  <footer style="text-align:center;padding:2rem;color:rgba(255,255,255,.7)">© 2025 Gen Deu Gagarin | Designed with ❤️</footer>

<script>
/* -------------------------
   App JS (integrated)
   ------------------------- */
/* SPA + loader + particles + typewriter + theme (kept light) */
const links = document.querySelectorAll('.nav-link');
const pages = document.querySelectorAll('.page');
const loaderEl = document.getElementById('loader');
const dimEl = document.getElementById('dim');
const btnCarousel = document.getElementById('btn-carousel');
const btnGrid = document.getElementById('btn-grid');
const carouselView = document.getElementById('carouselView');
const gridView = document.getElementById('gridView');
const caseModal = document.getElementById('case-study');
const closeBtn = caseModal.querySelector('.close');

function showLoader(){ loaderEl && (loaderEl.style.opacity = '1'); dimEl && (dimEl.style.opacity = '1'); }
function hideLoader(){ loaderEl && (loaderEl.style.opacity = '0'); dimEl && (dimEl.style.opacity = '0'); }

const canvas = document.getElementById('bgCanvas');
const ctx = canvas && canvas.getContext && canvas.getContext('2d');
function fitCanvas(){ if(!canvas) return; canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
fitCanvas();
let particles = [];
if(ctx){
  for(let i=0;i<80;i++){ particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:1+Math.random()*2,dx:(Math.random()-.5)*.6,dy:(Math.random()-.5)*.6,opacity:Math.random()}); }
  function animateParticles(){ ctx.clearRect(0,0,canvas.width,canvas.height); particles.forEach(p=>{ ctx.beginPath(); ctx.fillStyle=`rgba(255,255,255,${(document.body.classList.contains('light')?0.22:p.opacity)})`; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill(); p.x+=p.dx; p.y+=p.dy; if(p.x<0||p.x>canvas.width)p.dx*=-1; if(p.y<0||p.y>canvas.height)p.dy*=-1; }); requestAnimationFrame(animateParticles); }
  animateParticles(); window.addEventListener('resize', fitCanvas);
}

document.addEventListener('DOMContentLoaded', () => { showLoader(); setTimeout(()=>hideLoader(),700); });
links.forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    const href = link.getAttribute('href');
    links.forEach(l => l.classList.remove('active')); link.classList.add('active');
    pages.forEach(p => { if(p.classList.contains('active')){ p.style.opacity='0'; p.style.transform='translateY(20px)'; setTimeout(()=>p.classList.remove('active'),340); }});
    setTimeout(()=>{ const target = document.querySelector(href); if(target){ target.classList.add('active'); target.style.opacity='1'; target.style.transform='translateY(0)'; } hideLoader(); }, 700);
  });
});

/* typewriter */
const roles = ["UI/UX Developer","Frontend Engineer","Creative Coder"]; let roleIndex=0,charIndex=0; const typewriter = document.getElementById("typewriter");
function type(){ if(!typewriter) return; if(charIndex < roles[roleIndex].length){ typewriter.textContent += roles[roleIndex].charAt(charIndex++); setTimeout(type,90); } else setTimeout(erase,1600); }
function erase(){ if(!typewriter) return; if(charIndex>0){ typewriter.textContent = roles[roleIndex].substring(0,--charIndex); setTimeout(erase,40);} else { roleIndex=(roleIndex+1)%roles.length; setTimeout(type,400);} } type();

/* theme toggle */
const themeBtn = document.getElementById('theme-toggle');
if(themeBtn) themeBtn.addEventListener('click', ()=>{ document.body.classList.toggle('light'); themeBtn.textContent = document.body.classList.contains('light') ? '🌞' : '🌙'; });

/* -------------------------
   YOUR PROJECTS DATA (placeholders)
   - Replace content & thumbnails later with your real assets
   ------------------------- */
const projects = [
  {
    key: 'proj-portfolio',
    title: 'Portfolio Site',
    role: 'UI/UX / Frontend',
    img: 'https://via.placeholder.com/600x360.png?text=Portfolio+Thumb',
    short: 'Personal portfolio showcasing case studies and UI experiments.',
    details: `<p>I designed and built a responsive portfolio with prioritized case studies, performance-conscious images, and accessible components. Focus: visual hierarchy, readable content, and fast interactions.</p>`,
    live: '#'
  },
  {
    key: 'proj-redesign',
    title: 'Redesign Concept',
    role: 'UI/UX Lead',
    img: 'https://via.placeholder.com/600x360.png?text=Redesign+Thumb',
    short: 'Website redesign concept focusing on conversion and content clarity.',
    details: `<p>Redesigned information architecture, simplified navigation, and improved CTA placements. Delivered hi-fi prototypes and a frontend implementation.</p>`,
    live: '#'
  },
  {
    key: 'proj-dashboard',
    title: 'Analytics Dashboard',
    role: 'Frontend Engineer',
    img: 'https://via.placeholder.com/600x360.png?text=Dashboard+Thumb',
    short: 'Interactive analytics dashboard with complex filters and charts.',
    details: `<p>Built reusable chart components, responsive grid layouts, and accessible controls. Emphasis on performance for large datasets.</p>`,
    live: '#'
  },
  {
    key: 'proj-mobile',
    title: 'Mobile App Flows',
    role: 'Product Designer',
    img: 'https://via.placeholder.com/600x360.png?text=Mobile+Thumb',
    short: 'Mobile-first UX flows and micro-interaction prototypes.',
    details: `<p>Created task-focused flows, onboarding experiments, and tactile micro-interactions to improve engagement and reduce drop-offs.</p>`,
    live: '#'
  },
  {
    key: 'proj-ecom',
    title: 'E-commerce UI',
    role: 'UX / Frontend',
    img: 'https://via.placeholder.com/600x360.png?text=Ecom+Thumb',
    short: 'Product listing & checkout UX with clear affordances.',
    details: `<p>Optimized product discovery, filtering, and checkout steps. Implemented progressive disclosure and accessible forms for smoother conversions.</p>`,
    live: '#'
  },
  {
    key: 'proj-designsystem',
    title: 'Design System',
    role: 'Design System Owner',
    img: 'https://via.placeholder.com/600x360.png?text=Design+System+Thumb',
    short: 'Component library and tokens for consistent UI across products.',
    details: `<p>Built a component library with tokens, variants, and documentation. Reduced implementation time and improved consistency across projects.</p>`,
    live: '#'
  }
];

/* -------------------------
   Carousel: original behavior but opens modal for centered slide
   ------------------------- */
document.addEventListener('DOMContentLoaded', async function () {
  const container = document.querySelector('.carousel-track-container');
  const track = document.querySelector('.carousel-track');
  const prevBtn = document.querySelector('.arrow-btn.prev');
  const nextBtn = document.querySelector('.arrow-btn.next');

  let slides = [];
  let currentIndex = 0;
  let transformX = 0;

  function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

  function buildSlidesFromProjects(list){
    const frag = document.createDocumentFragment();
    list.forEach(item=>{
      const slide = document.createElement('div');
      slide.className = 'carousel-slide';
      slide.dataset.key = item.key;
      slide.dataset.title = item.title;
      slide.dataset.img = item.img;
      slide.dataset.role = item.role;
      slide.dataset.short = item.short;
      slide.dataset.details = item.details;
      slide.dataset.live = item.live;

      const img = document.createElement('img');
      img.src = item.img;
      img.alt = item.title;

      const p = document.createElement('p');
      p.textContent = item.title || '';
      if(!p.textContent){ p.classList.add('hidden'); slide.classList.add('no-title'); }

      slide.appendChild(img);
      slide.appendChild(p);
      frag.appendChild(slide);
    });

    track.innerHTML = '';
    track.appendChild(frag);
    slides = Array.from(track.querySelectorAll('.carousel-slide'));

    slides.forEach((slide, index) => {
      slide.addEventListener('click', () => {
        // if centered, open modal with project data; otherwise center it
        if(isSlideCentered(slide)){
          openProjectModal(slide.dataset.key);
        } else {
          currentIndex = index;
          centerActive();
        }
      });
      slide.tabIndex = 0;
      slide.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter'||ev.key===' '){ ev.preventDefault(); slide.click(); }});
    });
  }

  function updateButtons(){
    prevBtn.disabled = currentIndex === 0;
    nextBtn.disabled = currentIndex === slides.length - 1;
  }

  function centerActive(){
    if(!slides.length) return;
    slides.forEach(s=>s.classList.remove('active'));
    const active = slides[currentIndex];
    if(!active) return;
    active.classList.add('active');

    const containerWidth = container.clientWidth;
    const targetCenter = active.offsetLeft + (active.offsetWidth / 2);
    const desired = -(targetCenter - (containerWidth / 2));
    transformX = desired + 79; // original visual offset kept
    track.style.transform = `translateX(${transformX}px)`;

    updateButtons();
  }

  function isSlideCentered(slideEl){
    if(!slideEl) return false;
    const containerRect = container.getBoundingClientRect();
    const slideRect = slideEl.getBoundingClientRect();
    const slideCenter = slideRect.left + (slideRect.width / 2);
    const containerCenter = containerRect.left + (containerRect.width / 2);
    return Math.abs(slideCenter - containerCenter) < (slideRect.width * 0.35);
  }

  // Open modal filled with project data
  function openProjectModal(key){
    const p = projects.find(x => x.key === key);
    if(!p) return;
    document.getElementById('modal-thumb').src = p.img;
    document.getElementById('modal-thumb').alt = p.title;
    document.getElementById('modal-title').textContent = p.title;
    document.getElementById('modal-role').textContent = p.role;
    document.getElementById('modal-body').innerHTML = p.details || `<p>${p.short || ''}</p>`;
    document.getElementById('modal-link').href = p.live || '#';
    caseModal.style.display = 'flex';
    setTimeout(()=> caseModal.classList.add('show'), 16);
  }

  function closeModal(){ caseModal.classList.remove('show'); setTimeout(()=> caseModal.style.display = 'none', 220); }
  closeBtn && closeBtn.addEventListener('click', closeModal);
  window.addEventListener('click', e=>{ if(e.target === caseModal) closeModal(); });
  window.addEventListener('keydown', e=>{ if(e.key === 'Escape') closeModal(); });

  // init carousel from projects array
  buildSlidesFromProjects(projects);
  currentIndex = clamp(2, 0, Math.max(0, slides.length - 1));

  prevBtn.addEventListener('click', ()=>{ if(currentIndex>0){ currentIndex--; centerActive(); }});
  nextBtn.addEventListener('click', ()=>{ if(currentIndex<slides.length-1){ currentIndex++; centerActive(); }});
  window.addEventListener('resize', centerActive);
  centerActive();

  // drag support: minimal
  let isDown=false, startX=0, startTranslate=0;
  track.addEventListener('pointerdown', (e)=>{ isDown=true; track.setPointerCapture(e.pointerId); startX=e.clientX; const m = getComputedStyle(track).transform.match(/matrix\\(([^)]+)\\)/); startTranslate = m ? parseFloat(m[1].split(',')[4]) : 0; track.style.transition='none'; }, { passive:true });
  track.addEventListener('pointermove', (e)=>{ if(!isDown) return; const dx = e.clientX - startX; const trackWidth = track.scrollWidth; const minTranslate = Math.min(container.clientWidth - trackWidth, 0); const maxTranslate = 0; let next = startTranslate + dx; next = Math.max(minTranslate, Math.min(maxTranslate, next)); track.style.transform = `translateX(${next}px)`; }, { passive:true });
  const endDrag = (e)=>{ if(!isDown) return; isDown=false; try{ track.releasePointerCapture(e && e.pointerId);}catch{} track.style.transition=''; // snap to nearest
    let bestIndex=0, bestDist=Infinity, containerRect = container.getBoundingClientRect(), centerX = containerRect.left + (containerRect.width/2);
    slides.forEach((s,i)=>{ const r=s.getBoundingClientRect(); const c=r.left + (r.width/2); const d=Math.abs(c-centerX); if(d<bestDist){bestDist=d;bestIndex=i;} });
    currentIndex = bestIndex; centerActive();
  };
  track.addEventListener('pointerup', endDrag); track.addEventListener('pointercancel', endDrag); track.addEventListener('pointerleave', endDrag);

  // GRID cards open same modal
  document.querySelectorAll('.project-grid .project').forEach(el=>{
    el.addEventListener('click', ()=> openProjectModal(el.dataset.key));
  });

}); // end carousel DOMContentLoaded

/* View toggle handlers (simple) */
function setProjectsView(mode){
  const carouselView = document.getElementById('carouselView');
  const gridView = document.getElementById('gridView');
  const btnCarousel = document.getElementById('btn-carousel');
  const btnGrid = document.getElementById('btn-grid');
  if(mode === 'grid'){
    carouselView.style.display = 'none';
    gridView.style.display = '';
    btnCarousel && btnCarousel.setAttribute('aria-pressed','false');
    btnGrid && btnGrid.setAttribute('aria-pressed','true');
    localStorage.setItem('projectsView','grid');
  } else {
    carouselView.style.display = '';
    gridView.style.display = 'none';
    btnCarousel && btnCarousel.setAttribute('aria-pressed','true');
    btnGrid && btnGrid.setAttribute('aria-pressed','false');
    localStorage.setItem('projectsView','carousel');
  }
}
const savedView = localStorage.getItem('projectsView') || 'carousel';
setProjectsView(savedView);
document.getElementById('btn-carousel').addEventListener('click', ()=> setProjectsView('carousel'));
document.getElementById('btn-grid').addEventListener('click', ()=> setProjectsView('grid'));

</script>
</body>
</html>
